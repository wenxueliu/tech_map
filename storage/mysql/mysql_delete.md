mysql_delete



数据删除流程





1、删除是软删除（记录标记为删除），并不会释放磁盘空间

2、被软删除的记录造成存储空间的空洞，影响磁盘利用率





### 记录的复用

前提：一个页的部分记录被软删除

条件：仅仅符合范围的数据。

举例：

待补充图

1、初始300，400，600

2、400 被删除

3、插入 800，无法复用

4、插入 500，被复用

### 数据页的复用

前提：一个页所有记录都被软删除

条件：新插入记录需要使用新的页



情况一：被软删除的页被新插入记录复用

举例

待补充图

1、页 A （10，50，100） 所有记录都被软删除

2、插入记录 1000，此时，相邻页都满了，需要创建新的页

3、记录1000 复用页 A 的空间。



情况二：两个页可以合并

举例

待补充图

1、页 A中100 为软删除，页 B 中300，500 为软删除

2、合并页 B 的数据到页 A。页 B 可以被复用。





## 附录

