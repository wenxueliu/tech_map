# 【AI 编程】AI 辅助研发效率提升的思考

## 定义问题，远远比解决问题重要

AI 不是万能的，不要让AI做不擅长的事

## 背景

随着AI技术的快速发展，AI编程助手如GitHub Copilot等工具已成为现代软件开发的重要组成部分。AI的发展对编程的范式改变是必然的，你不拥抱，别人就会拥抱，你就会在商业成本上更高而降低产品竞争力。

然而，许多团队在引入这些工具后，面临着使用率低、接受度不高等问题。本文将从多个角度探讨如何让团队真正接受AI编程助手，并充分发挥其潜力。

## 适用范围

软件研发成本占比较高(>30%)的公司或团队

注：有些企业的竞争力不包含研发成本或者研发成本的降低对成本影响很低，此时，AI辅助研发提效就不是必须的。

## 背景

企业降本增效中，对员工的应用的措施，包含的几种场景

| 场景 | 措施 | 结果 |
|------|------|------|
| 业务收缩（ROI低） | 裁人 | 降低收入，提高了ROI |
| 业务不变 | 裁人（降低成本） | 可能出现质量事件，交付延迟等，面临客户投诉 |
| 扩充业务不加人（控制成本） | 控制成本 | 可能出现质量事件，交付延迟等，面临客户投诉 |

注：实际上还有其他降低成本的措施，不在本文考虑范围

为了避免副作用的其中一个方法就是提高人效。

## 研发人效的影响因素

1. 战略与方向层面（做正确的事 - Direction）
2. 组织与流程层面（正确地做事 - System）
3. 技术与工具层面（高效地做事 - Enablement）
4. 人才与能力层面（由正确的人做事 - Talent）
5. 文化与激励层面（愿意主动地做事 - Motivation）

由于本文讨论 AI 辅助研发提效，通过控制变量法，保持其他不变的情况下，专注通过技术与工具作为切入点来提升研发效率

## AI 辅助提效从哪里入手（Where)

根据二八法则，核心是找到研发的高能耗点，且AI能比较好得解决

### 从开发端到端活动分析

大部分团队，开发人员占比最高，最简单的方式看一个研发团队的各个岗位占比。

我们以 10 人团队为例，占比大概为项目经理:架构师:开发:测试 = 1:1:6:2，虽然，各个角色薪资不是1:1，毫无疑问，开发为成本占比最高

此外，1 个月发布一个版本为例，一个月 22 个工作日：

| 时间耗时 | 天数 | 活动 | AI |
|----------|------|------|----|
| 设计 | 4 | 项目经理：方案确认，版本计划<br>架构师：方案澄清<br>开发：方案设计，反向澄清<br>测试：测试规划 | 无 |
| 开发 | 8 | 项目经理：进度跟踪，沟通协调<br>架构师：当前版本需求答疑，下个版本需求分析<br>开发：需求开发、单元测试开发<br>测试：测试用例开发 | 1、AI 辅助需求代码、单元测试代码<br>2、AI 辅助测试用例开发 |
| 测试 | 9 | 项目经理：进度跟踪，沟通协调<br>架构师：下个版本的需求分析<br>开发：问题单修改、单元测试<br>测试：测试用例执行 | 无 |
| 发布上线 | 1 | 开发：支撑上线<br>测试：支撑上线 | 无 |

显然，当前 AI的能力主要集中在代码生成

### 业界AI的投入

在软件开发领域，当前业界主要关注的就是代码生成，为什么业界要关注代码生成而不是其他，原因是技术易实现，github 有大量的代码供大模型训练，并且验证标准相对更容易，非常适合强化学习来迭代改进。而测试用例、架构设计文档等细节，缺失严重，标准不统一等。

在研发流程中，当前业界投入分析如下：

| 阶段 | 可公开训练数据 | 自动/客观评价 | 错误回滚成本 | 上下文长度需求 | 商业付费意愿 | 当前技术成熟度 | 综合 ROI | 资源投入热度 |
|------|----------------|---------------|--------------|----------------|--------------|----------------|----------|--------------|
| 需求分析 | ★ 企业内部文档，几乎无开源 | ★ 主观评审，无统一指标 | ★★ 需求返工=项目最大浪费 | ★★★★★ 会议记录+原型+脑图>1 M token | ★ 无明确预算科目 | ☆ 学术空白 | 极低 | 几乎无 |
| 系统设计 | ★ UML/架构图散落，格式不统一 | ★★ 靠架构师拍脑袋 | ★★ 设计失误导致后期重写 | ★★★★ 跨多模态图+文 | ★★ 预算挂在"咨询费" | ★ 探索性论文 | 低 | 零星 |
| 代码生成 | ★★★★★ GitHub 1.2 TB 公开+CI 反馈 | ★★★★★ 编译器/单元测试秒级 Pass/Fail | ★★★★ 函数级回滚秒级零损失 | ★★ 32k–200k token 刚好覆盖函数 | ★★★★★ 开发者月付 10–20 美元已成习惯 | ★★★★★ 已有千亿级模型+IDE 插件规模落地 | 最高 | 主力赛道 |
| 单元/接口测试 | ★★ 测试用例散见，无统一语法 | ★★★ 覆盖率可量化，但需搭环境 | ★★ 漏测带来线上故障 | ★★★ 需读代码+日志+配置 | ★★ 测试工具预算受限 | ★★ 自动生成用例刚起步 | 中 | 次热点 |
| 持续集成 | ★★ CI 脚本公开，但量小 | ★★★ 构建成功/失败可自动判定 | ★★ 构建失败阻塞交付 | ★★★★ 多仓库+多流水线 | ★ 企业不愿额外付费 | ★★ 研究阶段 | 中偏低 | 少量 |
| 部署&运维 | ★ 日志/监控高度敏感，难开源 | ★ MTTR/SLA 指标滞后且噪声大 | ★ 线上故障=直接赔钱+P0 值班 | ★★★★★ 跨云、多 K8s 集群，上下文巨大 | ★ 预算投给平台，不买单脚本 | ★ 实验性产品 | 极低 | 几乎无 |

星级说明：★越多代表该项越有利于 AI 大规模投入（数据多、评价易、成本低、付费意愿强等）。

通过以上分析，开发的编码部分在整个研发成本中占比最高，AI的成熟度也最高

## 如何通过AI提升开发效率（How)

AI提升开发效率，需要回答如下几个问题：

1. AI 能提升开发效率么？
   **能**

2. 哪些能？哪些不能？
   **需求生成代码、单元测试、测试用例设计**

3. 能提升多少？
   **不知道**

### 开发需求主要发生的变化点

AI 生成代码的过程：描述功能->AI生成代码->修改描述->AI生成代码，中间会迭代多轮。

人工写代码：设计文档->内心构思代码结构->生成代码

从对比可以发现，如果AI 生成代码中进行多次迭代，可能出现超过了人工写代码的时间，即使 100% 的代码由 AI 生成，也不能提升效率。

另外，根据二八法则，关键的 20%代码由人工写，80%的代码由 AI 生成，也不能证明能提效，因为那 20%的代码，可能耗时占比 80%。相信很多人已经开始吐槽，"AI写代码一时爽，修Bug火葬场"。有时候一个严重的 bug，就改 1 行代码，但是，你可能需要定位 1 天。

目前，业界一般会通过多少行代码由 AI 生成，比如，很多XX公司已经声称 90%以上代码由 AI 生成，生成不一定真正被采纳，采纳也不一定真正入库。而准确统计多少行代码入库本身就是一个非常难的事情。

因此，通过代码行数是否由AI 生成来来衡量AI 的价值，存在非常大的失真。

总结一下，AI 能提效多少，很难衡量，原因如下：

1. 研发过程中，写代码时间占比最高，但是，代码之外还有很多 AI 搞不定的
2. 90%的代码由 AI 生成，不代表团队产能能提升9 倍，实际上可能更慢

那么，是不是没法回答呢？或者说如何回答？

要回答这个问题，我理解从软件的本质分析，软件核心是交付功能，从滞后的指标进行分析，如果你的团队，去年比今年交付的功能明显多了，那么，很明显效率提升了。这样有两个问题：

1. 不可控的因素还是很多
2. 反馈周期太长，企业无法接受投入无法预估

## 提高AI编程效率模型

根据模型，我们可以采取以下措施来提高使用率：

1. 能力：正确使用 AI 的能力
2. 意愿：对 AI 存在偏见、惯性

这里有四种情况：

| 能力 | 意愿 | 提升效率 |
|------|------|----------|
| 强 | 强 | 好 |
| 强 | 弱 | 中 |
| 弱 | 强 | 中 |
| 弱 | 弱 | 低 |

因此，AI 提效的核心在于正确使用 AI，使用得越多，效果越好。

举一个自己真实的例子，我找了一个日常的需求，尝试让AI帮我生成代码

**阶段一**：自己把需求描述之后，发现 AI 无法直接给出满意的回答，试了 3-4 轮始终无法达到自己的期望。

**阶段二**：经过多次尝试之后，我找的了同类技术场景的范式，然后，基本每次根据需求，微调描述就能一次生成比较好的效果

人工评估之后，显然，比自己写代码要快多了。

因此，我意识到，关键是要针对实际的业务场景，输出最佳实践，这样其他开发人员基于最佳实践，第一次就能得到一个比较好的效果。

有些场景试了很多次，都不能提效的情况下，那么，我们也明确标记该类场景 AI 不擅长，开发人员手写即可，这本身也是一种提效。

## 落地关键路径

由上可知，如果一个软件开发人员：愿意使用AI，正确使用AI，提升效率越明显。

1. 准确将一个需求拆分为AI友好的功能点
2. 快速准确评估对应功能点AI是否能提效：评估场景越准确，AI使用越多，提效越高；AI不胜任的场景人工开发，降低试错的成本

**唯一检验标准**：参考优秀实践使用后，比人工效率要高，开发人员愿意使用

### 关键发力点

1. 提高开发人员将需求拆分为AI友好功能点的能力
2. 提高开发人员对功能判定的能力：准确评估功能AI是否可以解决，当前AI能力不具备，需要开发人员来判断（后续可以逐步实现根据功能描述实现自动化评估）。
3. 提高开发人员正确使用AI的能力

注：一种场景实例化后对应一个功能点，一个功能点对应一个场景

## 系统思维提升AI落地矩阵

AI提升开发效率是一个系统工程，其中涉及管理者、AI 工具构建者、AI 工具使用者、AI 工具运营推广者

| 角色 | 要求 |
|------|------|
| **团队管理者** | 对整个团队 AI 提效落地效果负责<br>1、评优评奖：对主动探索AI能力边界，并贡献案例的团队和个人进行宣传和激励<br>2、按需将流程、组织面向AI友好<br>3、营造牵引使用 AI 的氛围：标语、案例榜单 |
| **AI 工具构建者** | 1、优秀案例输出过程中疑难解答，提供正确使用 AI 的指导<br>2、针对 AI 不支持的场景，补齐能力<br>3、收集真实功能点，构建评测集 |
| **AI 运营推广者** | 1、做好团队的 AI 工具的赋能，使用过程中得到答疑<br>2、分析运营数据，针对存在偏见和惯性思维的开发人员，进行访谈，跟踪使用<br>**AI 工具使用者** | 1、梳理业务场景，并针对业务场景输出可复用的案例。<br>2、掌握需求的功能点拆分能力<br>3、参考优秀实践使用 AI |

## 需求拆分为功能点

需求拆分场景是一个持续迭代的过程，随着 AI 的能力变化也会变化，关键在于实践

1. **场景如何定义**：场景为技术维度，技术是可以枚举的，而业务场景难以枚举。比如，调用第三方接口，生成框架代码，生成SQL等
2. **场景的粒度**：场景显然是不是一个需求，而是一个个功能点，而功能点的粒度的大小由实际验证后才能确定，也与AI的能力强相关。可能是一个CRUD的中的一个接口，也可能是一组接口，不同AI的能力不同，功能点的粒度也不一样

## 正确使用AI的能力

1. AI 工具的使用
2. Prompt的使用
3. 团队规范的梳理
4. 业界、公司内优秀实践的复制

### 关键点

案例的质量决定了其他人探索的成本，如果案例质量不高，导致无法复制，增加其他人试错成本，需要不断迭代

## 实际运作过程中的痛点

| 维度 | 痛点 | 根因 | 解决思路 |
|------|------|------|----------|
| **意愿** | 当前业务交付压力大，没时间使用 | 没有时间 | 核心是需要探索，如果开发人员能快速评估一个场景是否能效，就不会说没有时间了。 |
| **意愿** | 想不起来使用，觉得麻烦 | 惯性 | AI 运营推广者根据数据识别惯性用户，针对性访谈 |
| **意愿** | 基于较少次使用效果，对AI能力进行评价，说效果不行 | 偏见 | 提供对应优秀实践<br>要求反馈不匹配的场景 |
| **能力** | 不知道如何与AI 交互：比如配置项目规则、怎么描述需求，各种模式使用场景等 | 使用 AI 较少，不知道如何与 AI 交互 | 1、提供AI使用的赋能<br>2、提供AI使用优秀实践 |
| **能力** | 不知道什么时候使用 AI | 缺乏对任务的评估能力 | 1、提供 AI 交互的赋能<br>2、AI 使用优秀实践 |
| **能力** | 不支持设计文档中图片的理解 | 上下文工程 | 1、AI 能力构建者构建多模态能力 |
| **能力** | 无法准确提取串讲和反串讲的记录 | 上下文工程 | 1、AI 能力构建者构建多模态能力<br>2、AI 能力构建者提供扩展能力 |
| **能力** | 代码生成速度点较慢，交互耗时长 | 基模型能力 | 1、AI 能力构建者增加算力降低模型响应时间<br>2、AI 能力构建者提供异步能力 |
| **能力** | AI 工具的问题较多 | AI 结果不稳定 | AI 能力构建者降低模型幻觉，提升工具的稳定性 |
| **能力** | 不知道怎么用，不愿意看文档 | 用户体验不好 | AI 能力构建者对工具的易用性进行专项评估 |
| **能力** | 无法使用，反馈了问题，后面就忘了 | 问题响应不及时 | AI 运营推广者保证时间投入，解决用户问题 |
| **能力** | 当前我的XX场景不支持 | AI 不支持扩展性 | AI 能力构建者评估，按需构建对应的能力 |
| **能力** | 之前还好好的，最近结果变差了 | AI 模型能力退化 | 1、AI 能力构建者出口做好能力评测<br>能力效果不稳定，基于 AI 场景，在业务 A 的情况下，效果好，在业务 B 的场景下，效果差。 |

这是存在的，进一步拆分场景，对于特定业务，需要进一步分析是上下文工程的问题，还是场景本身不支持，如果是场景不支持，可以例外说明。

## 未来畅想

1. AI自动对需求进行拆分，AI支持的场景自动生成AI不支持的场景，留给开发人员

当 **ai提效降低的成本 - 投入ai的成本 > 0**，此时，才能说，ai辅助效率提升了