

### 业务梳理

1、查询商品
2、创建订单
3、扣减库存
4、更新订单
5、付款
6、卖家发货

### 业务特点

非核心业务
低廉的价格
大幅推广
限时售空
定时上架
时间短、并发高

###

1、对已有系统冲击大
2、超卖问题
3、时间同步问题
4、系统异常的处理：如雪崩后的应急处理
5、安全与防护

### 系统设计理念

0、请求拦截在系统上游
1、限流
2、削峰
异步处理
缓存
3、可伸缩


### 业务设计

构建独立的秒杀系统，避免对已有系统造成影响

准备阶段


秒杀阶段




重新设计秒杀页面

1、页面尽量静态化，应用请求尽量使用 CDN 来抗住秒杀前的大部分查询流量
2、租用新的网络带宽应对突发的流量
3、秒杀URL动态化，URL增加服务端生成的随机数作为参数，秒杀开始时，才能使用。
4、只要少数人可以进入页面，其余用户直接进入秒杀结束页面
5、验证码

业务流程

下单前检查

下单服务器，如果未超过N条，用户进入填写订单及确认页面，直接返回结束页面

前端

1、页面静态化：CDN
2、禁止重复提交
3、用户限流

后台
1、限流
2、采用消息队列缓存请求
3、读缓存
4、写缓存：redis


安全与防护

刷单行为
僵尸账号：用户等级及资料完善度
